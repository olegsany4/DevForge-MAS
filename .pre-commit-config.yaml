# === Pre-commit unified config (refactored & extended) ===
# –¶–µ–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
# 1) –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏ "repos" –∏ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ö—É–∫–∏
# 2) –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –≤–µ—Ä—Å–∏–∏, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
# 3) –ü–æ—á–∏–Ω–∏—Ç—å –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ —Ñ–ª–∞–≥–∏ PyMarkdown: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤—ã–∑–æ–≤ "scan" + –∫–æ–Ω—Ñ–∏–≥
# 4) –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–≤—Ç–æ—Ñ–∏–∫—Å Markdown (tools/md_autofix.py) –ø–µ—Ä–µ–¥ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
# 5) –ù–µ —É–º–µ–Ω—å—à–∞—Ç—å —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫ ‚Äî —Å—Ç–∞—Ä—ã–µ —Å–µ–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤–Ω–∏–∑—É –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
# 6) –ò—Å–ø—Ä–∞–≤–∏—Ç—å gitleaks: —É–±—Ä–∞—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π --no-git, –∏—Å–∫–ª—é—á–∏—Ç—å .secrets.baseline
# 7) –ó–∞–∫—Ä—ã—Ç—å –∫–µ–π—Å —Å PyMarkdown –∏ ¬´Expected: 80¬ª —É CHANGELOG‚Äô–æ–≤ ‚Äî –∏—Å–∫–ª—é—á–∏—Ç—å –∏—Ö –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

repos:
  # -------------------------------
  # Python linters/formatters stack
  # -------------------------------
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.4
    hooks:
      - id: ruff
        args: ["--fix"]
        types_or: [python]
        exclude: ^(\.venv|node_modules|workspace/.*/venv)/
      - id: ruff-format
        types_or: [python]
        exclude: ^(\.venv|node_modules|workspace/.*/venv)/

  - repo: https://github.com/psf/black
    rev: 25.11.0
    hooks:
      - id: black
        types_or: [python]
        exclude: ^(\.venv|node_modules|workspace/.*/venv)/

  - repo: https://github.com/pycqa/isort
    rev: 7.0.0
    hooks:
      - id: isort
        types_or: [python]
        exclude: ^(\.venv|node_modules|workspace/.*/venv)/

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.18.2
    hooks:
      - id: mypy
        additional_dependencies: ["types-requests"]
        types_or: [python]
        exclude: ^(\.venv|node_modules|workspace/.*/venv)/

  # -------------------------------
  # Commit message checker
  # -------------------------------
  - repo: https://github.com/commitizen-tools/commitizen
    rev: v4.10.0
    hooks:
      - id: commitizen
        stages: [commit-msg]

  # -------------------------------
  # Pre-commit standard hooks
  # -------------------------------
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
      - id: check-merge-conflict
      - id: end-of-file-fixer
      - id: trailing-whitespace

  # ---------------------------------------
  # Secrets scanning (–¥–µ—Ç–µ–∫—Ç + —É—Å–ª–æ–≤–Ω—ã–π —Ö—É–∫)
  # ---------------------------------------
  - repo: https://github.com/Yelp/detect-secrets
    rev: v1.5.0
    hooks:
      - id: detect-secrets
        args: ["--baseline", ".secrets.baseline"]
        exclude: tests/|docs/
        stages: [pre-commit, pre-push]

  - repo: local
    hooks:
      - id: detect-secrets-if-baseline
        name: detect-secrets (if baseline exists)
        entry: bash -c 'test -f .secrets.baseline && detect-secrets-hook --baseline .secrets.baseline "$@" || echo "No baseline found, skipping."'
        language: system
        pass_filenames: true
        stages: [pre-commit, pre-push]

  # -------------------------------
  # Gitleaks (–¥–æ–ø. –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤)
  # -------------------------------
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.29.0
    hooks:
      - id: gitleaks
        # ‚úÖ –í–ê–ñ–ù–û: –∏—Å–∫–ª—é—á–∞–µ–º —Å–∞–º baseline, —á—Ç–æ–±—ã –Ω–µ –ª–æ–≤–∏—Ç—å —Ö—ç—à–∏ –∫–∞–∫ "—Å–µ–∫—Ä–µ—Ç—ã".
        exclude: ^\.secrets\.baseline$
        # üõ† –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: —É–±—Ä–∞–Ω –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–ª–∞–≥ --no-git.
        #    –°–æ—Ö—Ä–∞–Ω—è–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥: --redact. –û—Å—Ç–∞–ª—å–Ω–æ–µ ‚Äî –¥–µ—Ñ–æ–ª—Ç –ø–æ–≤–µ–¥–µ–Ω–∏—è —Ö—É–∫–∞.
        #    –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ gitleaks.
        args: ["--redact"]
        stages: [pre-commit, pre-push]

  # -------------------------------------------
  # Local Markdown auto-fix (–¥–æ –ª–∏–Ω—Ç–µ—Ä–æ–≤ Markdown)
  # -------------------------------------------
  - repo: local
    hooks:
      - id: md-autofix
        name: md-autofix (wrap URLs, blanklines around headings/fences)
        entry: python tools/md_autofix.py
        language: system
        files: \.(md|MD)$
        pass_filenames: true
        stages: [pre-commit]

  # -------------------------------
  # Markdown linters (–æ–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞)
  # A) markdownlint (node)
  # B) PyMarkdown (python)
  # -------------------------------
  - repo: https://github.com/igorshubovych/markdownlint-cli
    rev: v0.45.0
    hooks:
      - id: markdownlint
        # üÜï –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥, —á—Ç–æ–±—ã –ø–æ–¥–∞–≤–∏—Ç—å MD031 —Ç–∞–º, –≥–¥–µ —ç—Ç–æ –æ—Å–æ–∑–Ω–∞–Ω–Ω–æ
        args: ["--config", ".markdownlint.yaml"]
        additional_dependencies: []
        exclude: >-
          ^(\.venv|node_modules)/
          |^release/.*/compliance/OBLIGATIONS\.md$
          |^workspace/release/.*/compliance/OBLIGATIONS\.md$

  - repo: https://github.com/jackdewinter/pymarkdown
    rev: v0.9.33
    hooks:
      - id: pymarkdown
        # üõ† –í–ê–ñ–ù–û: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –î–û–õ–ñ–ù–´ –∏–¥—Ç–∏ –¥–æ –ø–æ–¥–∫–æ–º–∞–Ω–¥—ã.
        # –ë—ã–ª–æ: ["scan","--config",".pymarkdown.json","--continue-on-error"] ‚Üí –æ—à–∏–±–∫–∏
        # –°—Ç–∞–ª–æ: ["--config",".pymarkdown.json","--continue-on-error","scan"]
        args: ["--config", ".pymarkdown.json", "--continue-on-error", "scan"]
        files: \.(md|MD)$
        # üß© –î–û–ë–ê–í–õ–ï–ù–û: –∏—Å–∫–ª—é—á–∞–µ–º CHANGELOG –∏ —Ä–µ–ª–∏–∑–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã,
        # —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å ¬´Expected: 80¬ª —É changelog‚Äô–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ PyMarkdown –¥–µ—Ä–∂–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
        exclude: >-
          ^(\.venv|node_modules)/
          |^release/
          |^workspace/release/
          |^CHANGELOG\.md$
          |^.*/CHANGELOG\.md$
          |^release/.*/compliance/OBLIGATIONS\.md$
          |^workspace/release/.*/compliance/OBLIGATIONS\.md$

  # -------------------------------
  # YAML linter
  # -------------------------------
  - repo: https://github.com/adrienverge/yamllint
    rev: v1.37.1
    hooks:
      - id: yamllint
        # –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –ø–∞–π–ø–ª–∞–π–Ω –∏–∑-–∑–∞ —á–∞—Å—Ç–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
        args: ["-c", ".yamllint.yaml"]
        files: ^workspace/.ci/|\.ya?ml$

# ===========================
# BACKWARD-COMPAT (ARCHIVE)
# –û—Å—Ç–∞–≤–ª–µ–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º,
# —á—Ç–æ–±—ã –Ω–µ —É–º–µ–Ω—å—à–∞—Ç—å —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫
# –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∞.
# ===========================

# –î—É–±–ª–∏—Ä—É—é—â–∏–π –±–ª–æ–∫ pre-commit-hooks (—Å—Ç–∞—Ä—ã–π):
# repos:
#   - repo: https://github.com/pre-commit/pre-commit-hooks
#     rev: v4.6.0
#     hooks:
#       - id: check-merge-conflict
#       - id: end-of-file-fixer
#       - id: trailing-whitespace

# –î—É–±–ª–∏—Ä—É—é—â–∏–π detect-secrets (—Å—Ç–∞—Ä—ã–π –ø–æ–≤—Ç–æ—Ä):
# repos:
#   - repo: https://github.com/Yelp/detect-secrets
#     rev: v1.5.0
#     hooks:
#       - id: detect-secrets
#         args: ["--baseline", ".secrets.baseline"]
#         exclude: tests/|docs/

# Markdown –ª–∏–Ω—Ç–µ—Ä –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π (node) ‚Äî —É–∂–µ –ø–æ–¥–∫–ª—é—á—ë–Ω –≤—ã—à–µ:
# - repo: https://github.com/igorshubovych/markdownlint-cli
#   rev: v0.42.0
#   hooks:
#     - id: markdownlint
#       additional_dependencies: []

# –°—Ç–∞—Ä—ã–π (–ø—Ä–æ–±–ª–µ–º–Ω—ã–π) –≤—ã–∑–æ–≤ PyMarkdown:
# - repo: https://github.com/jackdewinter/pymarkdown
#   rev: v0.9.23
#   hooks:
#     - id: pymarkdown
#       args:
#         - scan
#         - --disable-rules  # <-- –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ, –æ—Å—Ç–∞–≤–ª–µ–Ω–æ –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞
#         - md013

# –î—É–±–ª–∏ yamllint ‚Äî —É–∂–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤—ã—à–µ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç—É –∂–µ –º–∞—Å–∫—É:
# - repo: https://github.com/adrienverge/yamllint
#   rev: v1.35.1
#   hooks:
#     - id: yamllint
#       files: ^workspace/.ci/|\.ya?ml$

# CHANGELOG (–ø–∞—Ç—á):
# - –î–æ–±–∞–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ö—É–∫ md-–∞–≤—Ç–æ—Ñ–∏–∫—Å (tools/md_autofix.py) –¥–æ markdownlint/pymarkdown.
# - PyMarkdown –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ñ–æ—Ä–º—É –≤—ã–∑–æ–≤–∞: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –¥–æ –ø–æ–¥–∫–æ–º–∞–Ω–¥—ã, –∑–∞—Ç–µ–º "scan".
# - markdownlint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç .markdownlint.yaml (–ø–æ–¥–∞–≤–ª—è–µ—Ç MD031 –≤ CONTRIBUTING.md –±–µ–∑ –ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–∞).
# - –ò—Å–∫–ª—é—á–µ–Ω—ã —à—É–º–Ω—ã–µ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ compliance-—Ñ–∞–π–ª—ã –∏–∑ markdown –ª–∏–Ω—Ç–µ—Ä–æ–≤.
# - gitleaks: –∏—Å–∫–ª—é—á—ë–Ω .secrets.baseline; —É–±—Ä–∞–Ω –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–ª–∞–≥ --no-git; –¥–æ–±–∞–≤–ª–µ–Ω –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ (--redact).
# - PyMarkdown: –∏—Å–∫–ª—é—á–µ–Ω—ã CHANGELOG‚Äô–∏ –∏ —Ä–µ–ª–∏–∑–Ω—ã–µ –∫–∞—Ç–∞–ª–æ–≥–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—É—Å—Ç—Ä–∞–Ω–µ–Ω–∞ ¬´Expected: 80¬ª).
# - –°—Ç—Ä–æ–∫ –±–æ–ª—å—à–µ –Ω–µ —Å—Ç–∞–ª–æ –º–µ–Ω—å—à–µ: –∞—Ä—Ö–∏–≤–Ω—ã–µ –±–ª–æ–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏.
