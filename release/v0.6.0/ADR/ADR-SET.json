{
  "adr": [
    {
      "id": "ADR-0001",
      "decision": "Центральный Orchestrator с очередью задач; агенты — независимые воркеры (pull).",
      "rationale": "Простая масштабируемость, отказоустойчивость, предсказуемое планирование стадий."
    },
    {
      "id": "ADR-0002",
      "decision": "Python 3.11 + mono-repo (src/), упаковка через pyproject.toml, Makefile как единая точка входа.",
      "rationale": "Единая сборка и переносимость; упрощение DevEx и CI."
    },
    {
      "id": "ADR-0003",
      "decision": "Конфигурации в YAML, секреты в .env; strict schema validation при старте.",
      "rationale": "Явные параметры, безопасное разделение секретов и конфигов."
    },
    {
      "id": "ADR-0004",
      "decision": "Метаданные и очереди — SQLite (локально) → PostgreSQL (prod); артефакты в файловом хранилище workspace/artifacts.",
      "rationale": "Быстрый локальный старт, безболезненный аплифт в prod."
    },
    {
      "id": "ADR-0005",
      "decision": "Структурные JSON-логи, трассировка задач/агентов по correlation_id; метрики через statsd-совместимый эмиттер.",
      "rationale": "Надёжная диагностика и разбор инцидентов."
    },
    {
      "id": "ADR-0006",
      "decision": "Идемпотентные стадии: детерминированные входы, hash-ключи артефактов, кэширование результатов.",
      "rationale": "Повторяемость и воспроизводимость пайплайна."
    },
    {
      "id": "ADR-0007",
      "decision": "Три уровня тестов: unit (pytest), contract (pydantic/jsonschema), e2e (оркестр + фиктивные агенты).",
      "rationale": "Раннее обнаружение регрессий, гарантия API-контрактов."
    },
    {
      "id": "ADR-0008",
      "decision": "Внешний доступ: HTTP API (FastAPI) + CLI обёртки; внутренняя шина событий — in-proc pub/sub.",
      "rationale": "Гибкое управление (человек/машина), простая интеграция."
    },
    {
      "id": "ADR-0009",
      "decision": "Least privilege, audit trail, запрет небезопасных подсказок; валидация входного контента.",
      "rationale": "Снижение рисков утечки и prompt-инъекций."
    },
    {
      "id": "ADR-0010",
      "decision": "SemVer для API; релизы — Make + тег в git, артефакты — versioned каталоги.",
      "rationale": "Прозрачные релизы и совместимость."
    }
  ]
}
